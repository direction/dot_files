servers() {
  local server_file=~/.servers
  local command
  if [ "$1" = '-u' ]; then
      shift
      fetch-dating-servers > "$server_file"
      fetch-couples-servers >> "$server_file"
  fi

  if [ "$#" -eq 0 ]; then
      cat "$server_file"
  else
      head -1 "$server_file"
      grep -i "$1" "$server_file"
  fi
}

fetch-dating-servers() {
    if [ -n "$HAW_DATING_CHEF_PATH" ]; then
        cd "$HAW_DATING_CHEF_PATH"
    else
        cd ~/workspace/chef-repo
    fi
    bundle exec knife rackspace server list
    cd -
}

fetch-couples-servers() {
    if [ -n "$HAW_COUPLES_CHEF_PATH" ]; then
        cd "$HAW_COUPLES_CHEF_PATH"
    else
        cd ~/workspace/couples-chef
    fi
    bundle exec knife ec2 server list
    cd -
}

request-pull() {
  if [ $# -ne 2 ]; then
      echo "USAGE: $FUNCNAME TITLE BRANCH"
  fi
  local title=$1; shift
  local branch=$1; shift
  hub pull-request "$title" -b howaboutwe:master -h "howaboutwe:$branch"
}
